<html xmlns:concordion="http://www.concordion.org/2007/concordion">
<body>
    <h1>Initiator ("Buy-Side") Session Initiation</h1>

    <p>
    The first message sent by the initiator is the Logon message. If
    the acceptor responds with a Logon message, we can be either
    authenticated, out-of-sync, or disconnected depending on the
    contents of the received Logon message. 
    </p>

    <div class="example">
        <table>
            <tr>
                <th>Acceptor Response</th>
                <th>Resulting State</th>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Valid Logon</td>
                <td concordion:assertEquals="#state">Authenticated</td>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Logon with MsgSeqNum too high</td>
                <td concordion:assertEquals="#state">Out-of-sync</td>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Invalid Logon</td>
                <td concordion:assertEquals="#state">Disconnected</td>
            </tr>
        </table>
    </div>

    <p>
    If the Acceptor responds to the initial Logon message with any message
    other than a Logon message, the connection is disconnected after sending
    Reject and Logout messages to the Acceptor.
    </p>

    <div class="example">
        <table>
            <tr>
                <th>Acceptor Response</th>
                <th>Resulting State</th>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Heartbeat</td>
                <td concordion:assertEquals="#state">Disconnected</td>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Logout</td>
                <td concordion:assertEquals="#state">Disconnected</td>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Reject</td>
                <td concordion:assertEquals="#state">Disconnected</td>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Resend Request</td>
                <td concordion:assertEquals="#state">Disconnected</td>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Sequence Reset</td>
                <td concordion:assertEquals="#state">Disconnected</td>
            </tr>
            <tr concordion:execute="#state = logon(#response)">
                <td concordion:set="#response">Test Request</td>
                <td concordion:assertEquals="#state">Disconnected</td>
            </tr>
        </table>
    </div>
</body>
</html>